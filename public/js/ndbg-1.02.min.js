function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}function closePayment(){callbackWhenBacked()}function callbackWhenBacked(){callbackPaymentHelper(_n_state,_n_result,_n_tranxid,_n_apptranxid,_n_netamount,_n_pmc,_n_grossamount)}function callbackPaymentHelper(e,t,n,r,i,s,o){if(e=="billed"){if(t<=0){var u="";if(_n_url_redirect==undefined||_n_url_redirect==""||_n_url_redirect==_n_px){u=_n_px+"failed?"}else{u=_n_url_redirect+"?state=failed&"}var a=_n_error_code!=undefined?_n_error_code:0;var f=_n_error_msg!=undefined?_n_error_msg:"";u+="error_code="+a+"&error_msg="+urldecode(f)+"&tranxid="+n+"&apptranxid="+r;if(_n_platform!=undefined&&_n_platform=="wp"){u="http://"+url}u+="&channel="+s;action(u);return}else if(t==2||t==3||t==4||t==5||t==6||t==7){var u="";if(_n_url_redirect==undefined||_n_url_redirect==""||_n_url_redirect==_n_px){u=_n_px+"waiting?"}else{u=_n_url_redirect+"?state=waiting&"}var a=_n_error_code!=undefined?_n_error_code:0;var f=_n_error_msg!=undefined?_n_error_msg:"";u+="error_code="+a+"&error_msg="+urldecode(f)+"&tranxid="+n+"&apptranxid="+r;if(_n_platform!=undefined&&_n_platform=="wp"){u="http://"+url}u+="&channel="+s;action(u);return}else{if(_n_url_redirect==undefined||_n_url_redirect==""||_n_url_redirect==_n_px){u=_n_px+"success?"}else{u=_n_url_redirect+"?state=success&"}u+="tranxid="+n+"&apptranxid="+r+"&netamount="+i+"&channel="+s+"&grossamount="+o;if(_n_platform!=undefined&&_n_platform=="wp"){u="http://"+url}action(u);return}}else{if(_n_url_redirect==undefined||_n_url_redirect==""||_n_url_redirect==_n_px){u=_n_px+"cancel?"}else{u=_n_url_redirect+"?state=cancel&"}u+="tranxid="+n;if(_n_platform!=undefined&&_n_platform=="wp"){u="http://"+u}u+="&channel="+s;action(u);return}}function action(e){if(_n_db!=undefined&&_n_db==true){alert("url="+e)}else{window.location.href=e}}var _n_px="udbg://"